function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
        var info = gen[key](arg);
        var value = info.value;
    } catch (error) {
        reject(error);
        return;
    }
    if (info.done) {
        resolve(value);
    } else {
        Promise.resolve(value).then(_next, _throw);
    }
}
function _async_to_generator(fn) {
    return function() {
        var self = this, args = arguments;
        return new Promise(function(resolve, reject) {
            var gen = fn.apply(self, args);
            function _next(value) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
            }
            function _throw(err) {
                asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
            }
            _next(undefined);
        });
    };
}
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
import { providers, utils } from "ethers";
import isEmpty from "lodash/isEmpty";
import { CHAIN_TYPES, PROVIDER_EVENT_BUS_EVENTS, PROVIDERS } from "../../enums";
import { errors } from "../../errors";
import { getEthExplorerAddressUrl, getEthExplorerTxUrl, requestAddEthChain, requestSwitchEthChain } from "../../helpers/eth";
import { createWalletConnectEthNamespace } from "../../helpers/wallet-connect";
import { Provider } from "../../provider";
import { ProviderEventBus } from "./_event-bus";
export class WalletConnectEvmProvider extends ProviderEventBus {
    static get providerType() {
        return PROVIDERS.WalletConnect;
    }
    get rawProvider() {
        return this.universalProvider;
    }
    get ethProvider() {
        var _this_universalProvider;
        if (!((_this_universalProvider = this.universalProvider) === null || _this_universalProvider === void 0 ? void 0 : _this_universalProvider.session)) {
            return null;
        }
        return new providers.Web3Provider(this.universalProvider);
    }
    get chainType() {
        return CHAIN_TYPES.EVM;
    }
    get isConnected() {
        return Boolean(this.chainId && this.address);
    }
    init() {
        var _this = this;
        return _async_to_generator(function*() {
            yield _this.checkForPersistedSession();
            yield _this.setListeners();
            yield _this.setCustomRpcs();
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.Initiated, _this.defaultEventPayload);
        })();
    }
    connect() {
        var _this = this;
        return _async_to_generator(function*() {
            var _this_universalProvider_session_namespaces_eip155_chains_, _this_universalProvider_session_namespaces_eip155_chains, _this_universalProvider_session_namespaces_eip155, _this_universalProvider_session_namespaces, _this_universalProvider_session, _this_universalProvider;
            if (!_this.universalProvider) {
                throw new errors.ProviderNotInitializedError();
            }
            yield _this.universalProvider.connect({
                namespaces: createWalletConnectEthNamespace(),
                optionalNamespaces: createWalletConnectEthNamespace(),
                skipPairing: true
            });
            yield _this.universalProvider.enable();
            const accounts = yield _this.universalProvider.request({
                method: 'eth_requestAccounts'
            });
            _this.chainId = (_this_universalProvider = _this.universalProvider) === null || _this_universalProvider === void 0 ? void 0 : (_this_universalProvider_session = _this_universalProvider.session) === null || _this_universalProvider_session === void 0 ? void 0 : (_this_universalProvider_session_namespaces = _this_universalProvider_session.namespaces) === null || _this_universalProvider_session_namespaces === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155 = _this_universalProvider_session_namespaces.eip155) === null || _this_universalProvider_session_namespaces_eip155 === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155_chains = _this_universalProvider_session_namespaces_eip155.chains) === null || _this_universalProvider_session_namespaces_eip155_chains === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155_chains_ = _this_universalProvider_session_namespaces_eip155_chains[0]) === null || _this_universalProvider_session_namespaces_eip155_chains_ === void 0 ? void 0 : _this_universalProvider_session_namespaces_eip155_chains_.split(':')[1];
            _this.address = accounts === null || accounts === void 0 ? void 0 : accounts[0];
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.AccountChanged, _this.defaultEventPayload);
            _this.emit(_this.isConnected ? PROVIDER_EVENT_BUS_EVENTS.Connect : PROVIDER_EVENT_BUS_EVENTS.Disconnect, _this.defaultEventPayload);
        })();
    }
    disconnect() {
        var _this = this;
        return _async_to_generator(function*() {
            if (!_this.universalProvider) {
                throw new errors.ProviderNotInitializedError();
            }
            yield _this.universalProvider.disconnect();
            _this.chainId = undefined;
            _this.address = undefined;
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.Disconnect, _this.defaultEventPayload);
        })();
    }
    checkForPersistedSession() {
        var _this = this;
        return _async_to_generator(function*() {
            var _this_universalProvider, _this_universalProvider_namespaces, _this_universalProvider1, _this_universalProvider_session_namespaces_eip155_accounts__split, _this_universalProvider_session_namespaces_eip155_accounts_, _this_universalProvider_session_namespaces_eip155_accounts, _this_universalProvider_session_namespaces_eip155, _this_universalProvider_session_namespaces, _this_universalProvider_session, _this_universalProvider2;
            if (!_this.universalProvider) {
                throw new errors.ProviderNotInitializedError();
            }
            if (!((_this_universalProvider = _this.universalProvider) === null || _this_universalProvider === void 0 ? void 0 : _this_universalProvider.session)) return;
            _this.chainId = (_this_universalProvider1 = _this.universalProvider) === null || _this_universalProvider1 === void 0 ? void 0 : (_this_universalProvider_namespaces = _this_universalProvider1.namespaces) === null || _this_universalProvider_namespaces === void 0 ? void 0 : _this_universalProvider_namespaces.eip155.defaultChain;
            _this.address = (_this_universalProvider2 = _this.universalProvider) === null || _this_universalProvider2 === void 0 ? void 0 : (_this_universalProvider_session = _this_universalProvider2.session) === null || _this_universalProvider_session === void 0 ? void 0 : (_this_universalProvider_session_namespaces = _this_universalProvider_session.namespaces) === null || _this_universalProvider_session_namespaces === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155 = _this_universalProvider_session_namespaces.eip155) === null || _this_universalProvider_session_namespaces_eip155 === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155_accounts = _this_universalProvider_session_namespaces_eip155.accounts) === null || _this_universalProvider_session_namespaces_eip155_accounts === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155_accounts_ = _this_universalProvider_session_namespaces_eip155_accounts[0]) === null || _this_universalProvider_session_namespaces_eip155_accounts_ === void 0 ? void 0 : (_this_universalProvider_session_namespaces_eip155_accounts__split = _this_universalProvider_session_namespaces_eip155_accounts_.split(':')) === null || _this_universalProvider_session_namespaces_eip155_accounts__split === void 0 ? void 0 : _this_universalProvider_session_namespaces_eip155_accounts__split[2];
        })();
    }
    getAddressUrl(chain, address) {
        return getEthExplorerAddressUrl(chain, address);
    }
    getTxUrl(chain, txHash) {
        return getEthExplorerTxUrl(chain, txHash);
    }
    getHashFromTx(txResponse) {
        return txResponse.transactionHash;
    }
    /**
   * @description Switch the chain with WalletConnect Provider.
   * You should always add a network first with the proper method
   * {@link Provider.setChainDetails} and then change it.
   */ switchChain(chainId) {
        var _this = this;
        return _async_to_generator(function*() {
            var _this_universalProvider;
            if (!_this.ethProvider) {
                throw new errors.ProviderDisconnected();
            }
            if (!Provider.chainsDetails) {
                throw new errors.ProviderChainDetailsNotFoundError();
            }
            const foundChain = Provider.chainsDetails[chainId];
            if (!foundChain) {
                throw new errors.ProviderChainNotFoundError();
            }
            yield _this.addChain(foundChain);
            (_this_universalProvider = _this.universalProvider) === null || _this_universalProvider === void 0 ? void 0 : _this_universalProvider.setDefaultChain(`eip155:${Number(foundChain.id)}`, foundChain.rpcUrl);
            yield requestSwitchEthChain(_this.ethProvider, foundChain.id);
        })();
    }
    setCustomRpcs() {
        var _this = this;
        return _async_to_generator(function*() {
            if (isEmpty(Provider.chainsDetails)) {
                return;
            }
            yield Promise.all(Object.entries(Provider.chainsDetails).map(function() {
                var _ref = _async_to_generator(function*([chainId, chainInfo]) {
                    var _this_universalProvider_rpcProviders_eip155_httpProviders, _this_universalProvider_rpcProviders_eip155, _this_universalProvider_rpcProviders, _this_universalProvider;
                    const rpcProvider = (_this_universalProvider = _this.universalProvider) === null || _this_universalProvider === void 0 ? void 0 : (_this_universalProvider_rpcProviders = _this_universalProvider.rpcProviders) === null || _this_universalProvider_rpcProviders === void 0 ? void 0 : (_this_universalProvider_rpcProviders_eip155 = _this_universalProvider_rpcProviders.eip155) === null || _this_universalProvider_rpcProviders_eip155 === void 0 ? void 0 : (_this_universalProvider_rpcProviders_eip155_httpProviders = _this_universalProvider_rpcProviders_eip155.httpProviders) === null || _this_universalProvider_rpcProviders_eip155_httpProviders === void 0 ? void 0 : _this_universalProvider_rpcProviders_eip155_httpProviders[chainId];
                    if (rpcProvider) {
                        yield rpcProvider.connect(chainInfo.rpcUrl);
                    }
                });
                return function(_) {
                    return _ref.apply(this, arguments);
                };
            }()));
        })();
    }
    addChain(chain) {
        var _this = this;
        return _async_to_generator(function*() {
            if (!_this.ethProvider) {
                throw new errors.ProviderDisconnected();
            }
            yield requestAddEthChain(_this.ethProvider, chain);
        })();
    }
    signAndSendTx(tx) {
        var _this = this;
        return _async_to_generator(function*() {
            var _this_ethProvider;
            if (!_this.universalProvider) {
                throw new errors.ProviderNotInitializedError();
            }
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.BeforeTxSent, {
                txBody: tx
            });
            const transactionResponse = yield (_this_ethProvider = _this.ethProvider) === null || _this_ethProvider === void 0 ? void 0 : _this_ethProvider.send('eth_sendTransaction', [
                tx
            ]);
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.TxSent, {
                txHash: transactionResponse === null || transactionResponse === void 0 ? void 0 : transactionResponse.hash
            });
            const receipt = yield transactionResponse === null || transactionResponse === void 0 ? void 0 : transactionResponse.wait();
            _this.emit(PROVIDER_EVENT_BUS_EVENTS.TxConfirmed, {
                txResponse: receipt
            });
            return receipt;
        })();
    }
    signMessage(message) {
        var _this = this;
        return _async_to_generator(function*() {
            var _this_ethProvider;
            if (!_this.ethProvider || !_this.address) {
                throw new errors.ProviderDisconnected();
            }
            return (_this_ethProvider = _this.ethProvider) === null || _this_ethProvider === void 0 ? void 0 : _this_ethProvider.send('personal_sign', [
                utils.hexlify(utils.toUtf8Bytes(message)),
                _this.address.toLowerCase()
            ]);
        })();
    }
    get defaultEventPayload() {
        return {
            address: this.address,
            chainId: this.chainId,
            isConnected: this.isConnected,
            walletConnectDisplayUri: this.walletConnectDisplayUri
        };
    }
    setListeners() {
        var _this = this;
        return _async_to_generator(function*() {
            if (!_this.universalProvider) {
                throw new errors.ProviderNotInitializedError();
            }
            _this.universalProvider.on('session_event', (e)=>{
                var _e_params, _e_params_event_data__split, _e_params_event_data_, _e_params_event_data, _e_params_event, _e_params1;
                var _e_params_chainId_split_;
                _this.chainId = (_e_params_chainId_split_ = e === null || e === void 0 ? void 0 : (_e_params = e.params) === null || _e_params === void 0 ? void 0 : _e_params.chainId.split(':')[1]) !== null && _e_params_chainId_split_ !== void 0 ? _e_params_chainId_split_ : _this.chainId;
                var _e_params_event_data__split_;
                _this.address = (_e_params_event_data__split_ = e === null || e === void 0 ? void 0 : (_e_params1 = e.params) === null || _e_params1 === void 0 ? void 0 : (_e_params_event = _e_params1.event) === null || _e_params_event === void 0 ? void 0 : (_e_params_event_data = _e_params_event.data) === null || _e_params_event_data === void 0 ? void 0 : (_e_params_event_data_ = _e_params_event_data[0]) === null || _e_params_event_data_ === void 0 ? void 0 : (_e_params_event_data__split = _e_params_event_data_.split(':')) === null || _e_params_event_data__split === void 0 ? void 0 : _e_params_event_data__split[2]) !== null && _e_params_event_data__split_ !== void 0 ? _e_params_event_data__split_ : _this.address;
                _this.emit(PROVIDER_EVENT_BUS_EVENTS.AccountChanged, _this.defaultEventPayload);
                _this.emit(PROVIDER_EVENT_BUS_EVENTS.ChainChanged, _this.defaultEventPayload);
                _this.emit(_this.isConnected ? PROVIDER_EVENT_BUS_EVENTS.Connect : PROVIDER_EVENT_BUS_EVENTS.Disconnect, _this.defaultEventPayload);
            });
            _this.universalProvider.on('session_delete', ()=>{
                _this.emit(PROVIDER_EVENT_BUS_EVENTS.Disconnect, _this.defaultEventPayload);
            });
            _this.universalProvider.on('display_uri', (uri)=>{
                _this.walletConnectDisplayUri = uri;
                _this.emit(PROVIDER_EVENT_BUS_EVENTS.WalletConnectDisplayUri, _this.defaultEventPayload);
            });
        })();
    }
    /**
   * import { Provider } from '@distributed/w3p'
   * import UniversalProvider from '@walletconnect/universal-provider'
   *
   * const universalProvider = new UniversalProvider({
   *   projectId,
   *   relayUrl,
   *   logger,
   * })
   *
   * const provider = new Provider(WalletConnectEvmProvider)
   * provider.init(providerInstance, listeners)
   * @param universalProvider
   */ constructor(universalProvider){
        super();
        _define_property(this, "universalProvider", void 0);
        _define_property(this, "walletConnectDisplayUri", '');
        _define_property(this, "chainId", void 0);
        _define_property(this, "address", void 0);
        this.universalProvider = universalProvider;
    }
} /*#__PURE__*/ 

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9wcm92aWRlcnMvd3JhcHBlZC9ldm0td2FsbGV0LWNvbm5lY3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVuaXZlcnNhbFByb3ZpZGVyIGZyb20gJ0B3YWxsZXRjb25uZWN0L3VuaXZlcnNhbC1wcm92aWRlcidcbmltcG9ydCB7IHByb3ZpZGVycywgdXRpbHMgfSBmcm9tICdldGhlcnMnXG5pbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSdcblxuaW1wb3J0IHsgQ0hBSU5fVFlQRVMsIFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMsIFBST1ZJREVSUyB9IGZyb20gJ0AvZW51bXMnXG5pbXBvcnQgeyBlcnJvcnMgfSBmcm9tICdAL2Vycm9ycydcbmltcG9ydCB7XG4gIGdldEV0aEV4cGxvcmVyQWRkcmVzc1VybCxcbiAgZ2V0RXRoRXhwbG9yZXJUeFVybCxcbiAgcmVxdWVzdEFkZEV0aENoYWluLFxuICByZXF1ZXN0U3dpdGNoRXRoQ2hhaW4sXG59IGZyb20gJ0AvaGVscGVycy9ldGgnXG5pbXBvcnQgeyBjcmVhdGVXYWxsZXRDb25uZWN0RXRoTmFtZXNwYWNlIH0gZnJvbSAnQC9oZWxwZXJzL3dhbGxldC1jb25uZWN0J1xuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdAL3Byb3ZpZGVyJ1xuaW1wb3J0IHR5cGUge1xuICBDaGFpbixcbiAgQ2hhaW5JZCxcbiAgRXRoVHJhbnNhY3Rpb25SZXNwb25zZSxcbiAgUHJvdmlkZXJQcm94eSxcbiAgUmF3UHJvdmlkZXIsXG4gIFRyYW5zYWN0aW9uUmVzcG9uc2UsXG4gIFR4UmVxdWVzdEJvZHksXG59IGZyb20gJ0AvdHlwZXMnXG5cbmltcG9ydCB7IFByb3ZpZGVyRXZlbnRCdXMgfSBmcm9tICcuLi93cmFwcGVkL19ldmVudC1idXMnXG5cbnR5cGUgV2FsbGV0Q29ubmVjdFNlc3Npb25FdmVudCA9IHtcbiAgcGFyYW1zOiB7XG4gICAgY2hhaW5JZDogc3RyaW5nXG4gICAgZXZlbnQ6IHtcbiAgICAgIGRhdGE6IHN0cmluZ1tdXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBXYWxsZXRDb25uZWN0RXZtUHJvdmlkZXJcbiAgZXh0ZW5kcyBQcm92aWRlckV2ZW50QnVzXG4gIGltcGxlbWVudHMgUHJvdmlkZXJQcm94eVxue1xuICB1bml2ZXJzYWxQcm92aWRlcjogVW5pdmVyc2FsUHJvdmlkZXJcbiAgd2FsbGV0Q29ubmVjdERpc3BsYXlVcmkgPSAnJ1xuXG4gIGNoYWluSWQ/OiBDaGFpbklkXG4gIGFkZHJlc3M/OiBzdHJpbmdcblxuICAvKipcbiAgICogaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdAZGlzdHJpYnV0ZWQvdzNwJ1xuICAgKiBpbXBvcnQgVW5pdmVyc2FsUHJvdmlkZXIgZnJvbSAnQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyJ1xuICAgKlxuICAgKiBjb25zdCB1bml2ZXJzYWxQcm92aWRlciA9IG5ldyBVbml2ZXJzYWxQcm92aWRlcih7XG4gICAqICAgcHJvamVjdElkLFxuICAgKiAgIHJlbGF5VXJsLFxuICAgKiAgIGxvZ2dlcixcbiAgICogfSlcbiAgICpcbiAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIoV2FsbGV0Q29ubmVjdEV2bVByb3ZpZGVyKVxuICAgKiBwcm92aWRlci5pbml0KHByb3ZpZGVySW5zdGFuY2UsIGxpc3RlbmVycylcbiAgICogQHBhcmFtIHVuaXZlcnNhbFByb3ZpZGVyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1bml2ZXJzYWxQcm92aWRlcjogUmF3UHJvdmlkZXIpIHtcbiAgICBzdXBlcigpXG5cbiAgICB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyID0gdW5pdmVyc2FsUHJvdmlkZXIgYXMgdW5rbm93biBhcyBVbml2ZXJzYWxQcm92aWRlclxuICB9XG5cbiAgc3RhdGljIGdldCBwcm92aWRlclR5cGUoKTogUFJPVklERVJTIHtcbiAgICByZXR1cm4gUFJPVklERVJTLldhbGxldENvbm5lY3RcbiAgfVxuXG4gIGdldCByYXdQcm92aWRlcigpOiBSYXdQcm92aWRlciB7XG4gICAgcmV0dXJuIHRoaXMudW5pdmVyc2FsUHJvdmlkZXIgYXMgdW5rbm93biBhcyBSYXdQcm92aWRlclxuICB9XG5cbiAgZ2V0IGV0aFByb3ZpZGVyKCk6IHByb3ZpZGVycy5XZWIzUHJvdmlkZXIgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXI/LnNlc3Npb24pIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBwcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHRoaXMudW5pdmVyc2FsUHJvdmlkZXIpXG4gIH1cblxuICBnZXQgY2hhaW5UeXBlKCk6IENIQUlOX1RZUEVTIHtcbiAgICByZXR1cm4gQ0hBSU5fVFlQRVMuRVZNXG4gIH1cblxuICBnZXQgaXNDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5jaGFpbklkICYmIHRoaXMuYWRkcmVzcylcbiAgfVxuXG4gIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5jaGVja0ZvclBlcnNpc3RlZFNlc3Npb24oKVxuXG4gICAgYXdhaXQgdGhpcy5zZXRMaXN0ZW5lcnMoKVxuXG4gICAgYXdhaXQgdGhpcy5zZXRDdXN0b21ScGNzKClcblxuICAgIHRoaXMuZW1pdChQUk9WSURFUl9FVkVOVF9CVVNfRVZFTlRTLkluaXRpYXRlZCwgdGhpcy5kZWZhdWx0RXZlbnRQYXlsb2FkKVxuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJOb3RJbml0aWFsaXplZEVycm9yKClcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyLmNvbm5lY3Qoe1xuICAgICAgbmFtZXNwYWNlczogY3JlYXRlV2FsbGV0Q29ubmVjdEV0aE5hbWVzcGFjZSgpLFxuICAgICAgb3B0aW9uYWxOYW1lc3BhY2VzOiBjcmVhdGVXYWxsZXRDb25uZWN0RXRoTmFtZXNwYWNlKCksXG4gICAgICBza2lwUGFpcmluZzogdHJ1ZSxcbiAgICB9KVxuXG4gICAgYXdhaXQgdGhpcy51bml2ZXJzYWxQcm92aWRlci5lbmFibGUoKVxuXG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyLnJlcXVlc3Q8c3RyaW5nW10+KHtcbiAgICAgIG1ldGhvZDogJ2V0aF9yZXF1ZXN0QWNjb3VudHMnLFxuICAgIH0pXG5cbiAgICB0aGlzLmNoYWluSWQgPVxuICAgICAgdGhpcy51bml2ZXJzYWxQcm92aWRlcj8uc2Vzc2lvbj8ubmFtZXNwYWNlcz8uZWlwMTU1Py5jaGFpbnM/LlswXT8uc3BsaXQoXG4gICAgICAgICc6JyxcbiAgICAgIClbMV1cblxuICAgIHRoaXMuYWRkcmVzcyA9IGFjY291bnRzPy5bMF1cblxuICAgIHRoaXMuZW1pdChcbiAgICAgIFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMuQWNjb3VudENoYW5nZWQsXG4gICAgICB0aGlzLmRlZmF1bHRFdmVudFBheWxvYWQsXG4gICAgKVxuXG4gICAgdGhpcy5lbWl0KFxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZFxuICAgICAgICA/IFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMuQ29ubmVjdFxuICAgICAgICA6IFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMuRGlzY29ubmVjdCxcbiAgICAgIHRoaXMuZGVmYXVsdEV2ZW50UGF5bG9hZCxcbiAgICApXG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGlmICghdGhpcy51bml2ZXJzYWxQcm92aWRlcikge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5Qcm92aWRlck5vdEluaXRpYWxpemVkRXJyb3IoKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyLmRpc2Nvbm5lY3QoKVxuICAgIHRoaXMuY2hhaW5JZCA9IHVuZGVmaW5lZFxuICAgIHRoaXMuYWRkcmVzcyA9IHVuZGVmaW5lZFxuICAgIHRoaXMuZW1pdChQUk9WSURFUl9FVkVOVF9CVVNfRVZFTlRTLkRpc2Nvbm5lY3QsIHRoaXMuZGVmYXVsdEV2ZW50UGF5bG9hZClcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yUGVyc2lzdGVkU2Vzc2lvbigpIHtcbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJOb3RJbml0aWFsaXplZEVycm9yKClcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXI/LnNlc3Npb24pIHJldHVyblxuXG4gICAgdGhpcy5jaGFpbklkID0gdGhpcy51bml2ZXJzYWxQcm92aWRlcj8ubmFtZXNwYWNlcz8uZWlwMTU1LmRlZmF1bHRDaGFpblxuXG4gICAgdGhpcy5hZGRyZXNzID1cbiAgICAgIHRoaXMudW5pdmVyc2FsUHJvdmlkZXI/LnNlc3Npb24/Lm5hbWVzcGFjZXM/LmVpcDE1NT8uYWNjb3VudHM/LlswXT8uc3BsaXQoXG4gICAgICAgICc6JyxcbiAgICAgICk/LlsyXVxuICB9XG5cbiAgZ2V0QWRkcmVzc1VybChjaGFpbjogQ2hhaW4sIGFkZHJlc3M6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldEV0aEV4cGxvcmVyQWRkcmVzc1VybChjaGFpbiwgYWRkcmVzcylcbiAgfVxuXG4gIGdldFR4VXJsKGNoYWluOiBDaGFpbiwgdHhIYXNoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBnZXRFdGhFeHBsb3JlclR4VXJsKGNoYWluLCB0eEhhc2gpXG4gIH1cblxuICBnZXRIYXNoRnJvbVR4KHR4UmVzcG9uc2U6IFRyYW5zYWN0aW9uUmVzcG9uc2UpOiBzdHJpbmcge1xuICAgIHJldHVybiAodHhSZXNwb25zZSBhcyBFdGhUcmFuc2FjdGlvblJlc3BvbnNlKS50cmFuc2FjdGlvbkhhc2hcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gU3dpdGNoIHRoZSBjaGFpbiB3aXRoIFdhbGxldENvbm5lY3QgUHJvdmlkZXIuXG4gICAqIFlvdSBzaG91bGQgYWx3YXlzIGFkZCBhIG5ldHdvcmsgZmlyc3Qgd2l0aCB0aGUgcHJvcGVyIG1ldGhvZFxuICAgKiB7QGxpbmsgUHJvdmlkZXIuc2V0Q2hhaW5EZXRhaWxzfSBhbmQgdGhlbiBjaGFuZ2UgaXQuXG4gICAqL1xuXG4gIGFzeW5jIHN3aXRjaENoYWluKGNoYWluSWQ6IENoYWluSWQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZXRoUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJEaXNjb25uZWN0ZWQoKVxuICAgIH1cblxuICAgIGlmICghUHJvdmlkZXIuY2hhaW5zRGV0YWlscykge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5Qcm92aWRlckNoYWluRGV0YWlsc05vdEZvdW5kRXJyb3IoKVxuICAgIH1cblxuICAgIGNvbnN0IGZvdW5kQ2hhaW4gPSBQcm92aWRlci5jaGFpbnNEZXRhaWxzW2NoYWluSWRdXG5cbiAgICBpZiAoIWZvdW5kQ2hhaW4pIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJDaGFpbk5vdEZvdW5kRXJyb3IoKVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuYWRkQ2hhaW4oZm91bmRDaGFpbilcblxuICAgIHRoaXMudW5pdmVyc2FsUHJvdmlkZXI/LnNldERlZmF1bHRDaGFpbihcbiAgICAgIGBlaXAxNTU6JHtOdW1iZXIoZm91bmRDaGFpbi5pZCl9YCxcbiAgICAgIGZvdW5kQ2hhaW4ucnBjVXJsLFxuICAgIClcblxuICAgIGF3YWl0IHJlcXVlc3RTd2l0Y2hFdGhDaGFpbih0aGlzLmV0aFByb3ZpZGVyLCBmb3VuZENoYWluLmlkKVxuICB9XG5cbiAgYXN5bmMgc2V0Q3VzdG9tUnBjcygpIHtcbiAgICBpZiAoaXNFbXB0eShQcm92aWRlci5jaGFpbnNEZXRhaWxzKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgT2JqZWN0LmVudHJpZXMoUHJvdmlkZXIuY2hhaW5zRGV0YWlscykubWFwKFxuICAgICAgICBhc3luYyAoW2NoYWluSWQsIGNoYWluSW5mb10pID0+IHtcbiAgICAgICAgICBjb25zdCBycGNQcm92aWRlciA9XG4gICAgICAgICAgICB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyPy5ycGNQcm92aWRlcnM/LmVpcDE1NT8uaHR0cFByb3ZpZGVycz8uW1xuICAgICAgICAgICAgICBjaGFpbklkXG4gICAgICAgICAgICBdXG4gICAgICAgICAgaWYgKHJwY1Byb3ZpZGVyKSB7XG4gICAgICAgICAgICBhd2FpdCBycGNQcm92aWRlci5jb25uZWN0KGNoYWluSW5mby5ycGNVcmwpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKSxcbiAgICApXG4gIH1cblxuICBhc3luYyBhZGRDaGFpbihjaGFpbjogQ2hhaW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZXRoUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJEaXNjb25uZWN0ZWQoKVxuICAgIH1cblxuICAgIGF3YWl0IHJlcXVlc3RBZGRFdGhDaGFpbih0aGlzLmV0aFByb3ZpZGVyLCBjaGFpbilcbiAgfVxuXG4gIGFzeW5jIHNpZ25BbmRTZW5kVHgodHg6IFR4UmVxdWVzdEJvZHkpOiBQcm9taXNlPFRyYW5zYWN0aW9uUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJOb3RJbml0aWFsaXplZEVycm9yKClcbiAgICB9XG5cbiAgICB0aGlzLmVtaXQoUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5CZWZvcmVUeFNlbnQsIHtcbiAgICAgIHR4Qm9keTogdHgsXG4gICAgfSlcblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmV0aFByb3ZpZGVyPy5zZW5kKFxuICAgICAgJ2V0aF9zZW5kVHJhbnNhY3Rpb24nLFxuICAgICAgW3R4XSxcbiAgICApXG5cbiAgICB0aGlzLmVtaXQoUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5UeFNlbnQsIHtcbiAgICAgIHR4SGFzaDogdHJhbnNhY3Rpb25SZXNwb25zZT8uaGFzaCxcbiAgICB9KVxuXG4gICAgY29uc3QgcmVjZWlwdCA9IGF3YWl0IHRyYW5zYWN0aW9uUmVzcG9uc2U/LndhaXQoKVxuXG4gICAgdGhpcy5lbWl0KFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMuVHhDb25maXJtZWQsIHtcbiAgICAgIHR4UmVzcG9uc2U6IHJlY2VpcHQsXG4gICAgfSlcblxuICAgIHJldHVybiByZWNlaXB0XG4gIH1cblxuICBhc3luYyBzaWduTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5ldGhQcm92aWRlciB8fCAhdGhpcy5hZGRyZXNzKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLlByb3ZpZGVyRGlzY29ubmVjdGVkKClcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ldGhQcm92aWRlcj8uc2VuZCgncGVyc29uYWxfc2lnbicsIFtcbiAgICAgIHV0aWxzLmhleGxpZnkodXRpbHMudG9VdGY4Qnl0ZXMobWVzc2FnZSkpLFxuICAgICAgdGhpcy5hZGRyZXNzLnRvTG93ZXJDYXNlKCksXG4gICAgXSlcbiAgfVxuXG4gIGdldCBkZWZhdWx0RXZlbnRQYXlsb2FkKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZGRyZXNzOiB0aGlzLmFkZHJlc3MsXG4gICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWQsXG4gICAgICBpc0Nvbm5lY3RlZDogdGhpcy5pc0Nvbm5lY3RlZCxcbiAgICAgIHdhbGxldENvbm5lY3REaXNwbGF5VXJpOiB0aGlzLndhbGxldENvbm5lY3REaXNwbGF5VXJpLFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldExpc3RlbmVycygpIHtcbiAgICBpZiAoIXRoaXMudW5pdmVyc2FsUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuUHJvdmlkZXJOb3RJbml0aWFsaXplZEVycm9yKClcbiAgICB9XG5cbiAgICB0aGlzLnVuaXZlcnNhbFByb3ZpZGVyLm9uKFxuICAgICAgJ3Nlc3Npb25fZXZlbnQnLFxuICAgICAgKGU6IFdhbGxldENvbm5lY3RTZXNzaW9uRXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jaGFpbklkID0gZT8ucGFyYW1zPy5jaGFpbklkLnNwbGl0KCc6JylbMV0gPz8gdGhpcy5jaGFpbklkXG5cbiAgICAgICAgdGhpcy5hZGRyZXNzID1cbiAgICAgICAgICBlPy5wYXJhbXM/LmV2ZW50Py5kYXRhPy5bMF0/LnNwbGl0KCc6Jyk/LlsyXSA/PyB0aGlzLmFkZHJlc3NcblxuICAgICAgICB0aGlzLmVtaXQoXG4gICAgICAgICAgUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5BY2NvdW50Q2hhbmdlZCxcbiAgICAgICAgICB0aGlzLmRlZmF1bHRFdmVudFBheWxvYWQsXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLmVtaXQoXG4gICAgICAgICAgUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5DaGFpbkNoYW5nZWQsXG4gICAgICAgICAgdGhpcy5kZWZhdWx0RXZlbnRQYXlsb2FkLFxuICAgICAgICApXG5cbiAgICAgICAgdGhpcy5lbWl0KFxuICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWRcbiAgICAgICAgICAgID8gUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5Db25uZWN0XG4gICAgICAgICAgICA6IFBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMuRGlzY29ubmVjdCxcbiAgICAgICAgICB0aGlzLmRlZmF1bHRFdmVudFBheWxvYWQsXG4gICAgICAgIClcbiAgICAgIH0sXG4gICAgKVxuXG4gICAgdGhpcy51bml2ZXJzYWxQcm92aWRlci5vbignc2Vzc2lvbl9kZWxldGUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5EaXNjb25uZWN0LCB0aGlzLmRlZmF1bHRFdmVudFBheWxvYWQpXG4gICAgfSlcblxuICAgIHRoaXMudW5pdmVyc2FsUHJvdmlkZXIub24oJ2Rpc3BsYXlfdXJpJywgKHVyaTogc3RyaW5nKSA9PiB7XG4gICAgICB0aGlzLndhbGxldENvbm5lY3REaXNwbGF5VXJpID0gdXJpXG5cbiAgICAgIHRoaXMuZW1pdChcbiAgICAgICAgUFJPVklERVJfRVZFTlRfQlVTX0VWRU5UUy5XYWxsZXRDb25uZWN0RGlzcGxheVVyaSxcbiAgICAgICAgdGhpcy5kZWZhdWx0RXZlbnRQYXlsb2FkLFxuICAgICAgKVxuICAgIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcm92aWRlcnMiLCJ1dGlscyIsImlzRW1wdHkiLCJDSEFJTl9UWVBFUyIsIlBST1ZJREVSX0VWRU5UX0JVU19FVkVOVFMiLCJQUk9WSURFUlMiLCJlcnJvcnMiLCJnZXRFdGhFeHBsb3JlckFkZHJlc3NVcmwiLCJnZXRFdGhFeHBsb3JlclR4VXJsIiwicmVxdWVzdEFkZEV0aENoYWluIiwicmVxdWVzdFN3aXRjaEV0aENoYWluIiwiY3JlYXRlV2FsbGV0Q29ubmVjdEV0aE5hbWVzcGFjZSIsIlByb3ZpZGVyIiwiUHJvdmlkZXJFdmVudEJ1cyIsIldhbGxldENvbm5lY3RFdm1Qcm92aWRlciIsInByb3ZpZGVyVHlwZSIsIldhbGxldENvbm5lY3QiLCJyYXdQcm92aWRlciIsInVuaXZlcnNhbFByb3ZpZGVyIiwiZXRoUHJvdmlkZXIiLCJzZXNzaW9uIiwiV2ViM1Byb3ZpZGVyIiwiY2hhaW5UeXBlIiwiRVZNIiwiaXNDb25uZWN0ZWQiLCJCb29sZWFuIiwiY2hhaW5JZCIsImFkZHJlc3MiLCJpbml0IiwiY2hlY2tGb3JQZXJzaXN0ZWRTZXNzaW9uIiwic2V0TGlzdGVuZXJzIiwic2V0Q3VzdG9tUnBjcyIsImVtaXQiLCJJbml0aWF0ZWQiLCJkZWZhdWx0RXZlbnRQYXlsb2FkIiwiY29ubmVjdCIsIlByb3ZpZGVyTm90SW5pdGlhbGl6ZWRFcnJvciIsIm5hbWVzcGFjZXMiLCJvcHRpb25hbE5hbWVzcGFjZXMiLCJza2lwUGFpcmluZyIsImVuYWJsZSIsImFjY291bnRzIiwicmVxdWVzdCIsIm1ldGhvZCIsImVpcDE1NSIsImNoYWlucyIsInNwbGl0IiwiQWNjb3VudENoYW5nZWQiLCJDb25uZWN0IiwiRGlzY29ubmVjdCIsImRpc2Nvbm5lY3QiLCJ1bmRlZmluZWQiLCJkZWZhdWx0Q2hhaW4iLCJnZXRBZGRyZXNzVXJsIiwiY2hhaW4iLCJnZXRUeFVybCIsInR4SGFzaCIsImdldEhhc2hGcm9tVHgiLCJ0eFJlc3BvbnNlIiwidHJhbnNhY3Rpb25IYXNoIiwic3dpdGNoQ2hhaW4iLCJQcm92aWRlckRpc2Nvbm5lY3RlZCIsImNoYWluc0RldGFpbHMiLCJQcm92aWRlckNoYWluRGV0YWlsc05vdEZvdW5kRXJyb3IiLCJmb3VuZENoYWluIiwiUHJvdmlkZXJDaGFpbk5vdEZvdW5kRXJyb3IiLCJhZGRDaGFpbiIsInNldERlZmF1bHRDaGFpbiIsIk51bWJlciIsImlkIiwicnBjVXJsIiwiUHJvbWlzZSIsImFsbCIsIk9iamVjdCIsImVudHJpZXMiLCJtYXAiLCJjaGFpbkluZm8iLCJycGNQcm92aWRlciIsInJwY1Byb3ZpZGVycyIsImh0dHBQcm92aWRlcnMiLCJzaWduQW5kU2VuZFR4IiwidHgiLCJCZWZvcmVUeFNlbnQiLCJ0eEJvZHkiLCJ0cmFuc2FjdGlvblJlc3BvbnNlIiwic2VuZCIsIlR4U2VudCIsImhhc2giLCJyZWNlaXB0Iiwid2FpdCIsIlR4Q29uZmlybWVkIiwic2lnbk1lc3NhZ2UiLCJtZXNzYWdlIiwiaGV4bGlmeSIsInRvVXRmOEJ5dGVzIiwidG9Mb3dlckNhc2UiLCJ3YWxsZXRDb25uZWN0RGlzcGxheVVyaSIsIm9uIiwiZSIsInBhcmFtcyIsImV2ZW50IiwiZGF0YSIsIkNoYWluQ2hhbmdlZCIsInVyaSIsIldhbGxldENvbm5lY3REaXNwbGF5VXJpIiwiY29uc3RydWN0b3IiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxTQUFTQSxTQUFTLEVBQUVDLEtBQUssUUFBUSxTQUFRO0FBQ3pDLE9BQU9DLGFBQWEsaUJBQWdCO0FBRXBDLFNBQVNDLFdBQVcsRUFBRUMseUJBQXlCLEVBQUVDLFNBQVMsUUFBUSxjQUFTO0FBQzNFLFNBQVNDLE1BQU0sUUFBUSxlQUFVO0FBQ2pDLFNBQ0VDLHdCQUF3QixFQUN4QkMsbUJBQW1CLEVBQ25CQyxrQkFBa0IsRUFDbEJDLHFCQUFxQixRQUNoQixvQkFBZTtBQUN0QixTQUFTQywrQkFBK0IsUUFBUSwrQkFBMEI7QUFDMUUsU0FBU0MsUUFBUSxRQUFRLGlCQUFZO0FBV3JDLFNBQVNDLGdCQUFnQixRQUFRLGVBQXVCO0FBV3hELE9BQU8sTUFBTUMsaUNBQ0hEO0lBNkJSLFdBQVdFLGVBQTBCO1FBQ25DLE9BQU9WLFVBQVVXLGFBQWE7SUFDaEM7SUFFQSxJQUFJQyxjQUEyQjtRQUM3QixPQUFPLElBQUksQ0FBQ0MsaUJBQWlCO0lBQy9CO0lBRUEsSUFBSUMsY0FBNkM7WUFDMUM7UUFBTCxJQUFJLEdBQUMsMEJBQUEsSUFBSSxDQUFDRCxpQkFBaUIsY0FB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