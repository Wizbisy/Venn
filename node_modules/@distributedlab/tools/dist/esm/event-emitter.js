function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
export class EventEmitter {
    on(key, fn) {
        var _this;
        this.handlers[key] = (_this = this.handlers[key] || []) === null || _this === void 0 ? void 0 : _this.concat(fn);
    }
    once(key, fn) {
        const handler = (data)=>{
            fn(data);
            this.off(key, handler);
        };
        this.on(key, handler);
    }
    off(key, fn) {
        var _this;
        this.handlers[key] = (_this = this.handlers[key] || []) === null || _this === void 0 ? void 0 : _this.filter((f)=>f !== fn);
    }
    emit(key, data) {
        var _this;
        (_this = this.handlers[key] || []) === null || _this === void 0 ? void 0 : _this.forEach((fn)=>{
            fn(data);
        });
    }
    clear() {
        this.handlers = {};
    }
    constructor(){
        _define_property(this, "handlers", {});
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ldmVudC1lbWl0dGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHtcbiAgRXZlbnRIYW5kbGVyLFxuICBFdmVudEhhbmRsZXJzTWFwLFxuICBFdmVudE1hcCxcbiAgRXZlbnRNYXBLZXksXG59IGZyb20gJ0AvdHlwZXMnXG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8VCBleHRlbmRzIEV2ZW50TWFwPiB7XG4gIGhhbmRsZXJzOiBFdmVudEhhbmRsZXJzTWFwPFQ+ID0ge31cblxuICBwdWJsaWMgb248SyBleHRlbmRzIEV2ZW50TWFwS2V5PFQ+PihrZXk6IEssIGZuOiBFdmVudEhhbmRsZXI8VFtLXT4pOiB2b2lkIHtcbiAgICB0aGlzLmhhbmRsZXJzW2tleV0gPSAodGhpcy5oYW5kbGVyc1trZXldIHx8IFtdKT8uY29uY2F0KGZuKVxuICB9XG5cbiAgcHVibGljIG9uY2U8SyBleHRlbmRzIEV2ZW50TWFwS2V5PFQ+PihrZXk6IEssIGZuOiBFdmVudEhhbmRsZXI8VFtLXT4pOiB2b2lkIHtcbiAgICBjb25zdCBoYW5kbGVyID0gKGRhdGE/OiBUW0tdKSA9PiB7XG4gICAgICBmbihkYXRhKVxuICAgICAgdGhpcy5vZmYoa2V5LCBoYW5kbGVyKVxuICAgIH1cbiAgICB0aGlzLm9uKGtleSwgaGFuZGxlcilcbiAgfVxuXG4gIHB1YmxpYyBvZmY8SyBleHRlbmRzIEV2ZW50TWFwS2V5PFQ+PihrZXk6IEssIGZuOiBFdmVudEhhbmRsZXI8VFtLXT4pOiB2b2lkIHtcbiAgICB0aGlzLmhhbmRsZXJzW2tleV0gPSAodGhpcy5oYW5kbGVyc1trZXldIHx8IFtdKT8uZmlsdGVyKGYgPT4gZiAhPT0gZm4pXG4gIH1cblxuICBwdWJsaWMgZW1pdDxLIGV4dGVuZHMgRXZlbnRNYXBLZXk8VD4+KGtleTogSywgZGF0YT86IFRbS10pOiB2b2lkIHwgbmV2ZXIge1xuICAgIDsodGhpcy5oYW5kbGVyc1trZXldIHx8IFtdKT8uZm9yRWFjaCgoZm46IEV2ZW50SGFuZGxlcjxUW0tdPikgPT4ge1xuICAgICAgZm4oZGF0YSlcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuaGFuZGxlcnMgPSB7fVxuICB9XG59XG4iXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwib24iLCJrZXkiLCJmbiIsImhhbmRsZXJzIiwiY29uY2F0Iiwib25jZSIsImhhbmRsZXIiLCJkYXRhIiwib2ZmIiwiZmlsdGVyIiwiZiIsImVtaXQiLCJmb3JFYWNoIiwiY2xlYXIiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFPQSxPQUFPLE1BQU1BO0lBR0pDLEdBQTZCQyxHQUFNLEVBQUVDLEVBQXNCLEVBQVE7WUFDbEQ7UUFBdEIsSUFBSSxDQUFDQyxRQUFRLENBQUNGLElBQUksSUFBSSxRQUFBLElBQUksQ0FBQ0UsUUFBUSxDQUFDRixJQUFJLElBQUksRUFBRSxjQUF4Qiw0QkFBRCxBQUFDLE1BQTJCRyxNQUFNLENBQUNGO0lBQzFEO0lBRU9HLEtBQStCSixHQUFNLEVBQUVDLEVBQXNCLEVBQVE7UUFDMUUsTUFBTUksVUFBVSxDQUFDQztZQUNmTCxHQUFHSztZQUNILElBQUksQ0FBQ0MsR0FBRyxDQUFDUCxLQUFLSztRQUNoQjtRQUNBLElBQUksQ0FBQ04sRUFBRSxDQUFDQyxLQUFLSztJQUNmO0lBRU9FLElBQThCUCxHQUFNLEVBQUVDLEVBQXNCLEVBQVE7WUFDbkQ7UUFBdEIsSUFBSSxDQUFDQyxRQUFRLENBQUNGLElBQUksSUFBSSxRQUFBLElBQUksQ0FBQ0UsUUFBUSxDQUFDRixJQUFJLElBQUksRUFBRSxjQUF4Qiw0QkFBRCxBQUFDLE1BQTJCUSxNQUFNLENBQUNDLENBQUFBLElBQUtBLE1BQU1SO0lBQ3JFO0lBRU9TLEtBQStCVixHQUFNLEVBQUVNLElBQVcsRUFBZ0I7WUFDckU7U0FBQSxRQUFBLElBQUksQ0FBQ0osUUFBUSxDQUFDRixJQUFJLElBQUksRUFBRSxjQUF4Qiw0QkFBRCxBQUFDLE1BQTJCVyxPQUFPLENBQUMsQ0FBQ1Y7WUFDcENBLEdBQUdLO1FBQ0w7SUFDRjtJQUVPTSxRQUFjO1FBQ25CLElBQUksQ0FBQ1YsUUFBUSxHQUFHLENBQUM7SUFDbkI7O1FBMUJBQSx1QkFBQUEsWUFBZ0MsQ0FBQzs7QUEyQm5DIn0=